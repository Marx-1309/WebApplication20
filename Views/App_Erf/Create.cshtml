@model WebApplication20.Models.App_Erf

@{
    ViewBag.Title = "Create";
}



@*@using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()*@

<div class="form-horizontal">
    <div class="row">
        <div class="col-xl-6">
            <!-- ====================================
                    ——— 1st FORM
            ===================================== -->

            <div class="card card-default">
                <div class="card-header">
                    <h2 style="color: rebeccapurple;font-weight: bold">CREATE ERF</h2>

                </div>
                <div class="card-body">
                    <div class="collapse" id="collapse-from-validation">
                        <pre class="language-html mb-4">
                             </pre>
                    </div>

                    <div>
                        <div class="form-row">
                            <div class="col-xl-6">
                                <div class="mb-5">
                                    <label class="text-dark font-weight-medium">ERF NUMBER</label>
                                    <div class="input-group mb-3">
                                        @Html.EditorFor(model => model.ErfNumber, new { htmlAttributes = new { @class = "form-control rounded-pill", @placeholder = "Enter Erf Number", title = "Please enter your Erf", Required = "required" } })
                                        @Html.ValidationMessageFor(model => model.ErfNumber, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>



                            <div class="col-xl-6">
                                <div class="mb-5">

                                    <label class="text-dark font-weight-medium">ERF SIZE</label>

                                    <div class="input-group mb-3">
                                        @Html.EditorFor(model => model.ErfSize, "", new { htmlAttributes = new { @class = "form-control rounded-pill", Placeholder = "enter erf size", Required = "required" } })
                                        @Html.ValidationMessageFor(model => model.ErfSize, "", new { @class = "text-danger" })
                                    </div>

                                </div>
                            </div>






                            <div class="col-md-12 mb-">
                            </div>


                            <div class="col-xl-6">
                                <div class="mb-5">

                                    <label class="text-dark font-weight-medium">ERF AREA</label>

                                    <div class="input-group mb-3">
                                        @Html.DropDownList("ErfAreaID", null, "--Select Erf Area--", htmlAttributes: new { @class = "form-control rounded-pill" })
                                        @Html.ValidationMessageFor(model => model.ErfAreaID, "", new { @class = "text-danger" })
                                    </div>

                                </div>
                            </div>


                            <div class="col-xl-6">
                                <div class="mb-5">

                                    <label class="text-dark font-weight-medium">PLOT TYPE</label>

                                    <div class="input-group mb-3">


                                        @Html.DropDownList("PlotTypeID", null, "--Select Plot Type--", htmlAttributes: new { @class = "form-control rounded-pill" })
                                        @Html.ValidationMessageFor(model => model.PlotTypeID, "", new { @class = "text-danger" })
                                    </div>

                                </div>
                            </div>


                            <!---->
                            <div class="col-md-12 mb-">
                            </div>


                            <div class="col-xl-6">
                                <div class="mb-5">


                                    <label class="text-dark font-weight-medium">ERF TOWNSHIP</label>

                                    <div class="input-group mb-3">
                                        @Html.DropDownList("ErfTownshipID", null, "--Select Township--", htmlAttributes: new { @class = "form-control rounded-pill" })
                                        @Html.ValidationMessageFor(model => model.ErfTownshipID, "", new { @class = "text-danger" })
                                    </div>

                                </div>
                            </div>


                            <div class="col-xl-6">
                                <div class="mb-5">

                                    <label class="text-dark font-weight-medium">ERF COMMENT</label>

                                    <div class="input-group mb-3">
                                        @Html.TextAreaFor(model => model.ErfComment, new { @id = "ErfComment", @class = "form-control rounded-pill", @placeholder = "Leave comment !" })
                                        @Html.ValidationMessageFor(model => model.ErfComment, "", new { @class = "text-danger" })
                                    </div>

                                </div>
                            </div>



                            <div class="col-md-12 mb-">
                            </div>

                            <div class="col-md-12 mb-">
                            </div>

                        </div>
                        <br />


                    </div>

                </div>
            </div>




        </div>

    </div>
    <div asp-validation-summary="All">
    </div>

    <button id="btnSave" class="btn btn-success " type="button"> Create Erf</button>
    @*<button id="btnSave" class="btn btn-success btn-sm mb-2 float-center" type="button" >*@
</div>

<div style="text-align:center;display:none" id="loaderDiv">
    <img src="~/Content/InternetSlowdown_Day.gif" width="150" />
</div>


<br />

<div>
    @Html.ActionLink("Back to List", "Index")
</div>



<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="sweetalert2.min.js"></script>
<link rel="stylesheet" href="sweetalert2.min.css">
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
@*Onclick js and css ref link*@

<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


<script>
    $(function () {


        $('#btnSave').on('click', function () {

            //  if (!$("#frmApp_Applicant").valid()) return;
            $("#loaderDiv").show();

            var app_Erf = {
                'ErfNumberID': $("#ErfNumberID").val(),
                'ErfNumber': $("#ErfNumber").val(),
                'ErfSize': parseInt($("#ErfSize").val()),
                'ErfAreaID': $("#ErfAreaID option:selected").val(),
                'PlotTypeID': $("#PlotTypeID option:selected").val(),
                'ErfTownshipID': $("#ErfTownshipID option:selected").val(),
                'ErfComment': $("#ErfComment").val(),
                'CreatedBy': $("#CreatedBy").val(),
                'CreatedDate': $("#CreatedDate").val(),
                'UpdatedBy': $("#UpdatedBy").val(),
                'UpdatedDate': $("#UpdatedDate").val(),
                'ErfPurchasePrice': $("#ErfPurchasePrice").val(),
                'ErfAdminFees': $("#ErfAdminFees").val(),
                'ErfVat': $("#ErfVat").val(),
                'StageAllocation': $("#StageAllocation").val(),
                'StageSale': $("#StageSale").val(),
                'StageRegistration': $("#StageRegistration").val(),
                'StageValuation': $("#StageValuation").val(),
                'ErfTotalPurchasePrice': $("#ErfTotalPurchasePrice").val(),
            };



            var model = {
                "app_Erf": app_Erf,

            };

            debugger;
            $.ajax({
                type: 'POST',
                url: '/App_Erf/Create/',
                contentType: "application/json; charset=utf-8",
                //contentType: "application/json",
                data: JSON.stringify(model),
                dataType: "JSON",
                cache: false,
                success: function (response) {
                    if (response.status == true) {
                        $("#loaderDiv").hide();
                        swalWithBootstrapButtons.fire(
                            'Created!',
                            'Your record has been Inserted.',
                            'success'
                        )
                        setTimeout(() => {
                            document.location.href = 'https://localhost:44384/App_Erf/Index';
                        }, 3000);
                    }
                    else {
                        swalWithBootstrapButtons.fire(
                            'Stop!',
                            'Your record was not Updated. Please verify your input',
                            'error'
                        )
                        $("#loaderDiv").hide();
                    }
                }
            });
        });


        const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
                confirmButton: 'btn btn-success',
                cancelButton: 'btn btn-danger'
            },
            buttonsStyling: false
        })

    });
</script>
